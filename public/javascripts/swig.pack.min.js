/*! Swig https://paularmstrong.github.com/swig | https://github.com/paularmstrong/swig/blob/master/LICENSE *//*! Cross-Browser Split 1.0.1 (c) Steven Levithan <stevenlevithan.com>; MIT License An ECMA-compliant, uniform cross-browser split method *//*! Underscore.js (c) 2011 Jeremy Ashkenas | https://github.com/documentcloud/underscore/blob/master/LICENSE *//*! DateZ (c) 2011 Tomo Universalis | https://github.com/TomoUniversalis/DateZ/blob/master/LISENCE */(function(){var a="{{ a }}",b;a.split(/(\{\{.*?\}\})/).length===0&&(b=function(a,c,d){function l(){var a=1;for(a;a<arguments.length-2;a+=1)arguments[a]===undefined&&(i[a]=undefined)}if(Object.prototype.toString.call(c)!=="[object RegExp]")return b._nativeSplit.call(a,c,d);var e=[],f=0,g=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.sticky?"y":""),h,i,j,k;c=RegExp(c.source,g+"g"),a=a.toString(),b._compliantExecNpcg||(h=RegExp("^"+c.source+"$(?!\\s)",g));if(d===undefined||d<0)d=Infinity;else{d=Math.floor(+d);if(!d)return[]}i=c.exec(a);while(i){j=i.index+i[0].length;if(j>f){e.push(a.slice(f,i.index)),!b._compliantExecNpcg&&i.length>1&&i[0].replace(h,l),i.length>1&&i.index<a.length&&Array.prototype.push.apply(e,i.slice(1)),k=i[0].length,f=j;if(e.length>=d)break}c.lastIndex===i.index&&(c.lastIndex+=1),i=c.exec(a)}return f===a.length?(k||!c.test(""))&&e.push(""):e.push(a.slice(f)),e.length>d?e.slice(0,d):e},b._compliantExecNpcg=/()??/.exec("")[1]===undefined,b._nativeSplit=String.prototype.split,String.prototype.split=function(a,c){return b(this,a,c)})})(),swig=function(){var a={},b={},c={},d={},e={},f={};return function(){function B(a,b,c){if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return a===b;a._chain&&(a=a._wrapped),b._chain&&(b=b._wrapped);if(a.isEqual&&x.isFunction(a.isEqual))return a.isEqual(b);if(b.isEqual&&x.isFunction(b.isEqual))return b.isEqual(a);var d=j.call(a);if(d!=j.call(b))return!1;switch(d){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if(typeof a!="object"||typeof b!="object")return!1;var e=c.length;while(e--)if(c[e]==a)return!0;c.push(a);var f=0,g=!0;if(d=="[object Array]"){f=a.length,g=f==b.length;if(g)while(f--)if(!(g=f in a==f in b&&B(a[f],b[f],c)))break}else{if("constructor"in a!="constructor"in b||a.constructor!=b.constructor)return!1;for(var h in a)if(k.call(a,h)){f++;if(!(g=k.call(b,h)&&B(a[h],b[h],c)))break}if(g){for(h in b)if(k.call(b,h)&&!(f--))break;g=!f}}return c.pop(),g}var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.slice,h=d.concat,i=d.unshift,j=e.toString,k=e.hasOwnProperty,l=d.forEach,m=d.map,n=d.reduce,o=d.reduceRight,p=d.filter,q=d.every,r=d.some,s=d.indexOf,t=d.lastIndexOf,u=Array.isArray,v=Object.keys,w=f.bind,x=function(a){return new D(a)};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=x),exports._=x):typeof define=="function"&&define.amd?define("underscore",function(){return x}):a._=x,x.VERSION="1.2.3";var y=x.each=x.forEach=function(a,b,d){if(a==null)return;if(l&&a.forEach===l)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;e<f;e++)if(e in a&&b.call(d,a[e],e,a)===c)return}else for(var g in a)if(k.call(a,g)&&b.call(d,a[g],g,a)===c)return};x.map=function(a,b,c){var d=[];return a==null?d:m&&a.map===m?a.map(b,c):(y(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),d)},x.reduce=x.foldl=x.inject=function(a,b,c,d){var e=arguments.length>2;a==null&&(a=[]);if(n&&a.reduce===n)return d&&(b=x.bind(b,d)),e?a.reduce(b,c):a.reduce(b);y(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)});if(!e)throw new TypeError("Reduce of empty array with no initial value");return c},x.reduceRight=x.foldr=function(a,b,c,d){var e=arguments.length>2;a==null&&(a=[]);if(o&&a.reduceRight===o)return d&&(b=x.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=x.toArray(a).reverse();return d&&!e&&(b=x.bind(b,d)),e?x.reduce(f,b,c,d):x.reduce(f,b)},x.find=x.detect=function(a,b,c){var d;return z(a,function(a,e,f){if(b.call(c,a,e,f))return d=a,!0}),d},x.filter=x.select=function(a,b,c){var d=[];return a==null?d:p&&a.filter===p?a.filter(b,c):(y(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},x.reject=function(a,b,c){var d=[];return a==null?d:(y(a,function(a,e,f){b.call(c,a,e,f)||(d[d.length]=a)}),d)},x.every=x.all=function(a,b,d){var e=!0;return a==null?e:q&&a.every===q?a.every(b,d):(y(a,function(a,f,g){if(!(e=e&&b.call(d,a,f,g)))return c}),e)};var z=x.some=x.any=function(a,b,d){b||(b=x.identity);var e=!1;return a==null?e:r&&a.some===r?a.some(b,d):(y(a,function(a,f,g){if(e||(e=b.call(d,a,f,g)))return c}),!!e)};x.include=x.contains=function(a,b){var c=!1;return a==null?c:s&&a.indexOf===s?a.indexOf(b)!=-1:(c=z(a,function(a){return a===b}),c)},x.invoke=function(a,b){var c=g.call(arguments,2);return x.map(a,function(a){return(b.call?b||a:a[b]).apply(a,c)})},x.pluck=function(a,b){return x.map(a,function(a){return a[b]})},x.max=function(a,b,c){if(!b&&x.isArray(a))return Math.max.apply(Math,a);if(!b&&x.isEmpty(a))return-Infinity;var d={computed:-Infinity};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>=d.computed&&(d={value:a,computed:g})}),d.value},x.min=function(a,b,c){if(!b&&x.isArray(a))return Math.min.apply(Math,a);if(!b&&x.isEmpty(a))return Infinity;var d={computed:Infinity};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},x.shuffle=function(a){var b=[],c;return y(a,function(a,d,e){d==0?b[0]=a:(c=Math.floor(Math.random()*(d+1)),b[d]=b[c],b[c]=a)}),b},x.sortBy=function(a,b,c){return x.pluck(x.map(a,function(a,d,e){return{value:a,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return c<d?-1:c>d?1:0}),"value")},x.groupBy=function(a,b){var c={},d=x.isFunction(b)?b:function(a){return a[b]};return y(a,function(a,b){var e=d(a,b);(c[e]||(c[e]=[])).push(a)}),c},x.sortedIndex=function(a,b,c){c||(c=x.identity);var d=0,e=a.length;while(d<e){var f=d+e>>1;c(a[f])<c(b)?d=f+1:e=f}return d},x.toArray=function(a){return a?a.toArray?a.toArray():x.isArray(a)?g.call(a):x.isArguments(a)?g.call(a):x.values(a):[]},x.size=function(a){return x.toArray(a).length},x.first=x.head=function(a,b,c){return b!=null&&!c?g.call(a,0,b):a[0]},x.initial=function(a,b,c){return g.call(a,0,a.length-(b==null||c?1:b))},x.last=function(a,b,c){return b!=null&&!c?g.call(a,Math.max(a.length-b,0)):a[a.length-1]},x.rest=x.tail=function(a,b,c){return g.call(a,b==null||c?1:b)},x.compact=function(a){return x.filter(a,function(a){return!!a})},x.flatten=function(a,b){return x.reduce(a,function(a,c){return x.isArray(c)?a.concat(b?c:x.flatten(c)):(a[a.length]=c,a)},[])},x.without=function(a){return x.difference(a,g.call(arguments,1))},x.uniq=x.unique=function(a,b,c){var d=c?x.map(a,c):a,e=[];return x.reduce(d,function(c,d,f){if(0==f||(b===!0?x.last(c)!=d:!x.include(c,d)))c[c.length]=d,e[e.length]=a[f];return c},[]),e},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=x.intersect=function(a){var b=g.call(arguments,1);return x.filter(x.uniq(a),function(a){return x.every(b,function(b){return x.indexOf(b,a)>=0})})},x.difference=function(a){var b=x.flatten(g.call(arguments,1));return x.filter(a,function(a){return!x.include(b,a)})},x.zip=function(){var a=g.call(arguments),b=x.max(x.pluck(a,"length")),c=new Array(b);for(var d=0;d<b;d++)c[d]=x.pluck(a,""+d);return c},x.indexOf=function(a,b,c){if(a==null)return-1;var d,e;if(c)return d=x.sortedIndex(a,b),a[d]===b?d:-1;if(s&&a.indexOf===s)return a.indexOf(b);for(d=0,e=a.length;d<e;d++)if(d in a&&a[d]===b)return d;return-1},x.lastIndexOf=function(a,b){if(a==null)return-1;if(t&&a.lastIndexOf===t)return a.lastIndexOf(b);var c=a.length;while(c--)if(c in a&&a[c]===b)return c;return-1},x.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);while(e<d)f[e++]=a,a+=c;return f};var A=function(){};x.bind=function(b,c){var d,e;if(b.bind===w&&w)return w.apply(b,g.call(arguments,1));if(!x.isFunction(b))throw new TypeError;return e=g.call(arguments,2),d=function(){if(this instanceof d){A.prototype=b.prototype;var a=new A,f=b.apply(a,e.concat(g.call(arguments)));return Object(f)===f?f:a}return b.apply(c,e.concat(g.call(arguments)))}},x.bindAll=function(a){var b=g.call(arguments,1);return b.length==0&&(b=x.functions(a)),y(b,function(b){a[b]=x.bind(a[b],a)}),a},x.memoize=function(a,b){var c={};return b||(b=x.identity),function(){var d=b.apply(this,arguments);return k.call(c,d)?c[d]:c[d]=a.apply(this,arguments)}},x.delay=function(a,b){var c=g.call(arguments,2);return setTimeout(function(){return a.apply(a,c)},b)},x.defer=function(a){return x.delay.apply(x,[a,1].concat(g.call(arguments,1)))},x.throttle=function(a,b){var c,d,e,f,g,h=x.debounce(function(){g=f=!1},b);return function(){c=this,d=arguments;var i=function(){e=null,g&&a.apply(c,d),h()};e||(e=setTimeout(i,b)),f?g=!0:a.apply(c,d),h(),f=!0}},x.debounce=function(a,b){var c;return function(){var d=this,e=arguments,f=function(){c=null,a.apply(d,e)};clearTimeout(c),c=setTimeout(f,b)}},x.once=function(a){var b=!1,c;return function(){return b?c:(b=!0,c=a.apply(this,arguments))}},x.wrap=function(a,b){return function(){var c=h.apply([a],arguments);return b.apply(this,c)}},x.compose=function(){var a=arguments;return function(){var b=arguments;for(var c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},x.after=function(a,b){return a<=0?b():function(){if(--a<1)return b.apply(this,arguments)}},x.keys=v||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)k.call(a,c)&&(b[b.length]=c);return b},x.values=function(a){return x.map(a,x.identity)},x.functions=x.methods=function(a){var b=[];for(var c in a)x.isFunction(a[c])&&b.push(c);return b.sort()},x.extend=function(a){return y(g.call(arguments,1),function(b){for(var c in b)b[c]!==void 0&&(a[c]=b[c])}),a},x.defaults=function(a){return y(g.call(arguments,1),function(b){for(var c in b)a[c]==null&&(a[c]=b[c])}),a},x.clone=function(a){return x.isObject(a)?x.isArray(a)?a.slice():x.extend({},a):a},x.tap=function(a,b){return b(a),a},x.isEqual=function(a,b){return B(a,b,[])},x.isEmpty=function(a){if(x.isArray(a)||x.isString(a))return a.length===0;for(var b in a)if(k.call(a,b))return!1;return!0},x.isElement=function(a){return!!a&&a.nodeType==1},x.isArray=u||function(a){return j.call(a)=="[object Array]"},x.isObject=function(a){return a===Object(a)},x.isArguments=function(a){return j.call(a)=="[object Arguments]"},x.isArguments(arguments)||(x.isArguments=function(a){return!!a&&!!k.call(a,"callee")}),x.isFunction=function(a){return j.call(a)=="[object Function]"},x.isString=function(a){return j.call(a)=="[object String]"},x.isNumber=function(a){return j.call(a)=="[object Number]"},x.isNaN=function(a){return a!==a},x.isBoolean=function(a){return a===!0||a===!1||j.call(a)=="[object Boolean]"},x.isDate=function(a){return j.call(a)=="[object Date]"},x.isRegExp=function(a){return j.call(a)=="[object RegExp]"},x.isNull=function(a){return a===null},x.isUndefined=function(a){return a===void 0},x.noConflict=function(){return a._=b,this},x.identity=function(a){return a},x.times=function(a,b,c){for(var d=0;d<a;d++)b.call(c,d)},x.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},x.mixin=function(a){y(x.functions(a),function(b){F(b,x[b]=a[b])})};var C=0;x.uniqueId=function(a){var b=C++;return a?a+b:b},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},x.template=function(a,b){var c=x.templateSettings,d="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(c.escape,function(a,b){return"',_.escape("+b.replace(/\\'/g,"'")+"),'"}).replace(c.interpolate,function(a,b){return"',"+b.replace(/\\'/g,"'")+",'"}).replace(c.evaluate||null,function(a,b){return"');"+b.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+";__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",e=new Function("obj","_",d);return b?e(b,x):function(a){return e.call(this,a,x)}};var D=function(a){this._wrapped=a};x.prototype=D.prototype;var E=function(a,b){return b?x(a).chain():a},F=function(a,b){D.prototype[a]=function(){var a=g.call(arguments);return i.call(a,this._wrapped),E(b.apply(x,a),this._chain)}};x.mixin(x),y(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];D.prototype[a]=function(){return b.apply(this._wrapped,arguments),E(this._wrapped,this._chain)}}),y(["concat","join","slice"],function(a){var b=d[a];D.prototype[a]=function(){return E(b.apply(this._wrapped,arguments),this._chain)}}),D.prototype.chain=function(){return this._chain=!0,this},D.prototype.value=function(){return this._wrapped}}.call(this),function(a){function d(a){return{render:function(){return"<pre>"+a.stack+"</pre>"}}}function g(b,c){var f={compileFile:a.compileFile,blocks:{},type:e.TEMPLATE,id:c},g,h,i;if(_config.allowErrors)f.tokens=e.parse.call(f,b,_config.tags,_config.autoescape);else try{f.tokens=e.parse.call(f,b,_config.tags,_config.autoescape)}catch(j){return new d(j)}return h=e.compile.call(f),i=new Function("__context","__parents","__filters","_",["__parents = __parents ? __parents.slice() : [];","var j = __parents.length,",'    __output = "",',"    __this = this;","while (j--) {","   if (__parents[j] === this.id) {",'         return "Circular import of template " + this.id + " in " + __parents[__parents.length-1];',"   }","}","__parents.push(this.id);",h,"return __output;"].join("")),f.render=function(a,b){if(_config.allowErrors)return i.call(this,a,b,_config.filters,_);try{return i.call(this,a,b,_config.filters,_)}catch(c){return new d(c)}},f}function h(a,b){var c=b.filename||a;return _config.cache||b.cache?(CACHE.hasOwnProperty(c)||(CACHE[c]=g(a,c)),CACHE[c]):g(a,c)}config={allowErrors:!1,autoescape:!0,cache:!0,encoding:"utf8",filters:c,root:"/",tags:f,tzOffset:0},_config=_.extend({},config),CACHE={},a.init=function(a){CACHE={},_config=_.extend({},config,a),_config.filters=_.extend(c,a.filters),_config.tags=_.extend(f,a.tags),b.defaultTZOffset=_config.tzOffset},a.compileFile=function(a){var b,c;a[0]==="/"&&(a=a.substr(1));if(_config.cache&&CACHE.hasOwnProperty(a))return CACHE[a];if(typeof window!="undefined")throw new d({stack:"You must pre-compile all templates in-browser. Use `swig.compile(template);`."});c=function(){var c=/^\//.test(a)?a:_config.root+"/"+a,d=fs.readFileSync(c,config.encoding);b=h(d,{filename:a})};if(_config.allowErrors)c();else try{c()}catch(e){b=new d(e)}return b},a.compile=function(a,b){b=b||{};var c=h(a,b||{});return function(a,b){return c.render(a,b)}}}(a),function(a){_months={full:["January","February","March","April","May","June","July","August","September","October","November","December"],abbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},_days={full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],alt:{"-1":"Yesterday",0:"Today",1:"Tomorrow"}},a.defaultTZOffset=0,a.DateZ=function(){function e(a){return a<10?"0"+a:a}function f(){var a=e(Math.floor(Math.abs(c.timezoneOffset)/60)),b=e(Math.abs(c.timezoneOffset)-a*60),d=c.timezoneOffset<0?"+":"-",f=c.tzAbbreviation===undefined?"":" ("+c.tzAbbreviation+")";return"GMT"+d+a+b+f}var b={"default":["getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCMonth","getUTCSeconds","toISOString","toGMTString","toUTCString","valueOf","getTime"],z:["getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getYear","toDateString","toLocaleDateString","toLocaleTimeString"],string:["toLocaleString","toString","toTimeString"],zSet:["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setYear"],set:["setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds"],"static":["UTC","parse"]},c=this,d;c.date=c.dateZ=arguments.length>1?new Date(Date.UTC.apply(Date,arguments)+(new Date).getTimezoneOffset()*6e4):arguments.length===1?new Date(new Date(arguments[0])):new Date,c.timezoneOffset=c.dateZ.getTimezoneOffset(),_.each(b.z,function(a){c[a]=function(){return c.dateZ[a]()}}),_.each(b.string,function(a){c[a]=function(){return c.dateZ[a].apply(c.dateZ,[]).replace(/GMT[+\-]\\d{4} \\(([a-zA-Z]{3,4})\\)/,f())}}),_.each(b["default"],function(a){c[a]=function(){return c.date[a]()}}),_.each(b["static"],function(a){c[a]=function(){return Date[a].apply(Date,arguments)}}),_.each(b.zSet,function(a){c[a]=function(){return c.dateZ[a].apply(c.dateZ,arguments),c.date=new Date(c.dateZ.getTime()-c.dateZ.getTimezoneOffset()*6e4+c.timezoneOffset*6e4),c}}),_.each(b.set,function(a){c[a]=function(){return c.date[a].apply(c.date,arguments),c.dateZ=new Date(c.date.getTime()+c.date.getTimezoneOffset()*6e4-c.timezoneOffset*6e4),c}}),a.defaultTZOffset&&this.setTimezoneOffset(a.defaultTZOffset)},a.DateZ.prototype={getTimezoneOffset:function(){return this.timezoneOffset},setTimezoneOffset:function(a,b){return this.timezoneOffset=a,b&&(this.tzAbbreviation=b),this.dateZ=new Date(this.date.getTime()+this.date.getTimezoneOffset()*6e4-this.timezoneOffset*6e4),this}},a.d=function(a){return(a.getDate()<10?"0":"")+a.getDate()},a.D=function(a){return _days.abbr[a.getDay()]},a.j=function(a){return a.getDate()},a.l=function(a){return _days.full[a.getDay()]},a.N=function(a){return a.getDay()},a.S=function(a){var b=a.getDate();return b%10===1&&b!==11?"st":b%10===2&&b!==12?"nd":b%10===3&&b!==13?"rd":"th"},a.w=function(a){return a.getDay()-1},a.z=function(b,c,d){var e=b.getFullYear(),f=new a.DateZ(e,b.getMonth(),b.getDate(),12,0,0),g=new a.DateZ(e,0,1,12,0,0);return f.setTimezoneOffset(c,d),g.setTimezoneOffset(c,d),Math.round((f-g)/864e5)},a.W=function(a){var b=new Date(a.valueOf()),c=(a.getDay()+6)%7,d;return b.setDate(b.getDate()-c+3),d=b.valueOf(),b.setMonth(0,1),b.getDay()!==4&&b.setMonth(0,1+(4-b.getDay()+7)%7),1+Math.ceil((d-b)/6048e5)},a.F=function(a){return _months.full[a.getMonth()]},a.m=function(a){return(a.getMonth()<9?"0":"")+(a.getMonth()+1)},a.M=function(a){return _months.abbr[a.getMonth()]},a.n=function(a){return a.getMonth()+1},a.t=function(a){return 32-(new Date(a.getFullYear(),a.getMonth(),32)).getDate()},a.L=function(a){return(new Date(a.getFullYear(),1,29)).getDate()===29},a.o=function(a){var b=new Date(a.valueOf());return b.setDate(b.getDate()-(a.getDay()+6)%7+3),b.getFullYear()},a.Y=function(a){return a.getFullYear()},a.y=function(a){return a.getFullYear().toString().substr(2)},a.a=function(a){return a.getHours()<12?"am":"pm"},a.A=function(a){return a.getHours()<12?"AM":"PM"},a.B=function(a){var b=a.getUTCHours(),c;return b=b===23?0:b+1,c=Math.abs(((b*60+a.getUTCMinutes())*60+a.getUTCSeconds())/86.4).toFixed(0),"000".concat(c).slice(c.length)},a.g=function(a){var b=a.getHours();return b===0?12:b>12?b-12:b},a.G=function(a){return a.getHours()},a.h=function(a){var b=a.getHours();return(b<10||12<b&&22>b?"0":"")+(b<12?b:b-12)},a.H=function(a){var b=a.getHours();return(b<10?"0":"")+b},a.i=function(a){var b=a.getMinutes();return(b<10?"0":"")+b},a.s=function(a){var b=a.getSeconds();return(b<10?"0":"")+b},a.O=function(a){var b=a.getTimezoneOffset();return(b<0?"-":"+")+(b/60<10?"0":"")+b/60+"00"},a.Z=function(a){return a.getTimezoneOffset()*60},a.c=function(a){return a.toISOString()},a.r=function(a){return a.toUTCString()},a.U=function(a){return a.getTime()/1e3}}(b),function(a){a.add=function(a,b){return _.isArray(a)&&_.isArray(b)?a.concat(b):typeof a=="object"&&typeof b=="object"?_.extend(a,b):_.isNumber(a)&&_.isNumber(b)?a+b:a+b},a.addslashes=function(b){return typeof b=="object"?(_.each(b,function(c,d){b[d]=a.addslashes(c)}),b):b.replace(/\\/g,"\\\\").replace(/\'/g,"\\'").replace(/\"/g,'\\"')},a.capitalize=function(b){return typeof b=="object"?(_.each(b,function(c,d){b[d]=a.capitalize(c)}),b):b.toString().charAt(0).toUpperCase()+b.toString().substr(1).toLowerCase()},a.date=function(a,c,d,e){var f=c.length,g=new b.DateZ(a),h,i=0,j="";d&&g.setTimezoneOffset(d,e);for(i;i<f;i+=1)h=c.charAt(i),b.hasOwnProperty(h)?j+=b[h](g,d,e):j+=h;return j},a["default"]=function(a,b){return typeof a=="undefined"||!a&&typeof a!="number"?b:a},a.escape=a.e=function(a,b){b=b||"html";if(typeof a=="string"){if(b==="js"){var c=0,d,e="";a=a.replace(/\\/g,"\\u005C");for(c;c<a.length;c+=1)d=a.charCodeAt(c),d<32?(d=d.toString(16).toUpperCase(),d=d.length<2?"0"+d:d,e+="\\u00"+d):e+=a[c];return e.replace(/&/g,"\\u0026").replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\'/g,"\\u0027").replace(/"/g,"\\u0022").replace(/\=/g,"\\u003D").replace(/-/g,"\\u002D").replace(/;/g,"\\u003B")}return a.replace(/&(?!amp;|lt;|gt;|quot;|#39;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}return a},a.first=function(a){return typeof a=="object"&&!_.isArray(a)?"":typeof a=="string"?a.substr(0,1):_.first(a)},a.join=function(a,b){if(_.isArray(a))return a.join(b);if(typeof a=="object"){var c=[];return _.each(a,function(a,b){c.push(a)}),c.join(b)}return a},a.json_encode=function(a){return JSON.stringify(a)},a.last=function(a){return typeof a=="object"&&!_.isArray(a)?"":typeof a=="string"?a.charAt(a.length-1):_.last(a)},a.length=function(a){return typeof a=="object"?_.keys(a).length:a.length},a.lower=function(b){return typeof b=="object"?(_.each(b,function(c,d){b[d]=a.lower(c)}),b):b.toString().toLowerCase()},a.replace=function(a,b,c,d){var e=new RegExp(b,d);return a.replace(e,c)},a.reverse=function(a){return _.isArray(a)?a.reverse():a},a.striptags=function(b){return typeof b=="object"?(_.each(b,function(c,d){b[d]=a.striptags(c)}),b):b.toString().replace(/(<([^>]+)>)/ig,"")},a.title=function(b){return typeof b=="object"?(_.each(b,function(c,d){b[d]=a.title(c)}),b):b.toString().replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})},a.uniq=function(a){return _.uniq(a)},a.upper=function(b){return typeof b=="object"?(_.each(b,function(c,d){b[d]=a.upper(c)}),b):b.toString().toUpperCase()},a.url_encode=function(a){return encodeURIComponent(a)},a.url_decode=function(a){return decodeURIComponent(a)}}(c),function(a){function b(b,c){if(_.isArray(b))return"(true)";b=b.replace(/^this/,"__this.__currentContext");if(a.isLiteral(b))return"(true)";var d=b.split(/(\.|\[|\])/),e="",f=[];return typeof c=="string"&&c.length&&d.unshift(c),d=_.reject(d,function(a){return a===""||a==="."||a==="["||a==="]"}),_.each(d,function(b){e+=e?isNaN(b)&&!a.isStringLiteral(b)?"."+b:"["+b+"]":b,f.push("typeof "+e+' !== "undefined"')}),"("+f.join(" && ")+")"}KEYWORDS=/^(Array|ArrayBuffer|Boolean|Date|Error|eval|EvalError|Function|Infinity|Iterator|JSON|Math|Namespace|NaN|Number|Object|QName|RangeError|ReferenceError|RegExp|StopIteration|String|SyntaxError|TypeError|undefined|uneval|URIError|XML|XMLList|break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|this|throw|try|typeof|var|void|while|with)(?=(\.|$))/,a.isStringLiteral=function(a){if(typeof a!="string")return!1;var b=a.substring(0,1),c=a.charAt(a.length-1,1),d;if(b===c&&(b==="'"||b==='"')){d=a.substr(1,a.length-2).split("").reverse().join("");if(b==="'"&&/'(?!\\)/.test(d)||c==='"'&&/"(?!\\)/.test(d))throw new Error("Invalid string literal. Unescaped quote ("+a[0]+") found.");return!0}return!1},a.isLiteral=function(b){var c=!1;return/^\d+([.]\d+)?$/.test(b)?c=!0:a.isStringLiteral(b)&&(c=!0),c},a.isValidName=function(a){return typeof a=="string"&&a.substr(0,2)!=="__"&&/^([$A-Za-z_]+[$A-Za-z_0-9]*)(\.?([$A-Za-z_]+[$A-Za-z_0-9]*))*$/.test(a)&&!KEYWORDS.test(a)},a.isValidShortName=function(a){return a.substr(0,2)!=="__"&&/^[$A-Za-z_]+[$A-Za-z_0-9]*$/.test(a)&&!KEYWORDS.test(a)},a.isValidBlockName=function(a){return/^[A-Za-z]+[A-Za-z_0-9]*$/.test(a)},a.check=b,a.escapeVarName=function(b,c){if(_.isArray(b))return _.each(b,function(d,e){b[e]=a.escapeVarName(d,c)}),b;b=b.replace(/^this/,"__this.__currentContext");if(a.isLiteral(b))return b;typeof c=="string"&&c.length&&(b=c+"."+b);var d="",e=b.split(".");return _.each(e,function(b){d+=d?isNaN(b)&&!a.isStringLiteral(b)?"."+b:"["+b+"]":b}),d.replace(/\n/g,"\\n").replace(/\r/g,"\\r")},a.wrapMethod=function(b,c,d){var f="(function () {\n",g;return b=b||'""',c?(g=c.args.split(","),g=_.map(g,function(b){var c,d=b.replace(/^\s+/,"");try{c="__"+e.parseVariable(d).name.replace(/\W/g,"_")}catch(g){return b}return a.isValidName(d)?(f+=a.setVar(c,e.parseVariable(d)),c):b}),g=g&&g.length?g.join(","):'""',g.length?f+="return "+d+'["'+c.name+'"].call(this, '+g+");\n":f+="return "+d+'["'+c.name+'"].call(this);\n',f+"})()"):b},a.wrapFilter=function(b,d){var e="",f="";return b=b||'""',d?(c.hasOwnProperty(d.name)&&(f=d.args?b+", "+d.args:b,e+=a.wrapMethod(b,{name:d.name,args:f},"__filters")),e):b},a.wrapFilters=function(b,c,d,e){var f=a.escapeVarName(b,d);return c&&c.length>0&&_.each(c,function(b){switch(b.name){case"raw":e=!1;return;case"e":case"escape":e=b.args||e;return;default:f=a.wrapFilter(f,b,"__filters")}}),f=f||'""',e&&(f="__filters.escape.call(this, "+f+", "+e+")"),f},a.setVar=function(c,d){var e="var "+c+' = "";\n'+"if ("+b(d.name)+") {\n"+"    "+c+" = "+a.wrapFilters(a.escapeVarName(d.name),d.filters,null,d.escape)+";\n"+"} else if ("+b(d.name,"__context")+") {\n"+"    "+c+" = "+a.wrapFilters(a.escapeVarName(d.name),d.filters,"__context",d.escape)+";\n"+"}\n";return d.filters.length&&(e+=" else if (true) {\n",e+="    "+c+" = "+a.wrapFilters("",d.filters,null,d.escape)+";\n",e+="}\n"),e}}(d),function(a){function b(a){return a.match(/^[\w\.]+/)[0]}function c(a){return a.replace(/\\/g,"\\\\")}function e(a){return c(a.replace(/^[\w\.]+\(|\)$/g,""))}function f(a,b){function i(a,c){var d=new RegExp("\\"+c+"$"),e=a,f="";while(!d.test(f)&&e<b.length)f+=" "+b[e],b[e]=null,e+=1;if(!d.test(f))throw new Error("Malformed arguments sent to tag.");return f.replace(/^ /,"")}b=_.map(b,c);var d=0,e=b.length,f,g,h=[];for(d;d<e;d+=1){f=b[d];if(f===null||/^\s+$/.test(f))continue;if(/^\"/.test(f)&&!/\"[\]\}]?$/.test(f)||/^\'/.test(f)&&!/\'[\]\}]?$/.test(f)||/^\{/.test(f)&&!/\}$/.test(f)||/^\[/.test(f)&&!/\]$/.test(f)){switch(f.substr(0,1)){case"'":g="'";break;case'"':g='"';break;case"[":g="]";break;case"{":g="}"}h.push(i(d,g));continue}h.push(f)}return h}variableRegexp=/^\{\{.*?\}\}$/,logicRegexp=/^\{%[^\r]*?%\}$/,commentRegexp=/^\{#[^\r]*?#\}$/,TEMPLATE=a.TEMPLATE=0,LOGIC_TOKEN=1,VAR_TOKEN=2,a.TOKEN_TYPES={TEMPLATE:TEMPLATE,LOGIC:LOGIC_TOKEN,VAR:VAR_TOKEN},a.parseVariable=function(a,c){if(!a)return{type:null,name:"",filters:[],escape:c};var d=[],f=a.replace(/^\{\{ *| *\}\}$/g,"").split("|"),g=f.shift(),h=0,i=f.length,j=null,k,l;/\(/.test(g)&&(j=e(g.replace(/^\w+\./,"")),g=b(g));for(h;h<i;h+=1)l=f[h],l&&(/^[\w\.]+\(/.test(l)||/\)$/.test(l))&&!/^[\w\.]+\([^\)]*\)$/.test(l)&&(f[h]+="|"+f[h+1],f[h+1]=!1);f=_.without(f,!1),h=0,i=f.length;for(h;h<i;h+=1)l=f[h],k=b(l),/\(/.test(l)?d.push({name:k,args:e(l)}):d.push({name:k,args:""});return{type:VAR_TOKEN,name:g,args:j,filters:d,escape:c}},a.parse=function(b,c,d){var e=b.replace(/(^\s+)|(\s+$)/g,"").split(/(\{%[^\r]*?%\}|\{\{.*?\}\}|\{#[^\r]*?#\})/),g=!!d,h=g,i=[[]],j=0,k=0,l=e.length,m=[],n,o,p,q,r,s,t,u,v=1,w=1,x=null,y,z=/^\{\% *raw *\%\}/,A=/\{\% *endraw *\%\}$/,B=!1;for(k;k<l;k+=1){p=e[k],w=v,x=p.match(/\n/g),x&&(v+=x.length);if(B!==!1&&!A.test(p)){B+=p;continue}if(p.length===0||commentRegexp.test(p))continue;if(/^(\s|\n)+$/.test(p))p=p.replace(/ +/," ").replace(/\n+/,"\n");else if(variableRegexp.test(p))p=a.parseVariable(p,g);else if(logicRegexp.test(p)){if(A.test(p)){p=B+p.replace(A,""),B=!1,i[j].push(p);continue}if(z.test(p)){B=p.replace(z,"");continue}q=p.replace(/^\{%\s*|\s*%\}$/g,"").split(" "),u=q.shift();if(j>0&&/^end/.test(u)){y=_.last(i[i.length-2]);if("end"+y.name===u){y.name==="autoescape"&&(g=h),i.pop(),j-=1;continue}throw new Error('Expected end tag for "'+y.name+'", but found "'+u+'" at line '+v+".")}if(!c.hasOwnProperty(u))throw new Error("Unknown logic tag at line "+v+': "'+u+'".');u==="autoescape"&&(h=g,g=!q.length||q[0]==="on"?q.length>=2?q[1]:!0:!1),p={type:LOGIC_TOKEN,line:w,name:u,compile:c[u],parent:_.uniq(i[i.length-2])},p.args=f(p,q);if(c[u].ends){i[j].push(p),i.push(p.tokens=[]),j+=1;continue}}i[j].push(p)}if(B!==!1)throw new Error('Missing expected end tag for "raw" on line '+w+".");if(j!==0)throw y=_.last(i[i.length-2]),new Error('Missing end tag for "'+y.name+'" that was opened on line '+y.line+".");return i[j]},a.compile=function g(a,b){var e="",f=[],h,i,j,k;return a=a||"",this.type===TEMPLATE&&(_.each(this.tokens,function(b,c){if(b.name==="extends"){i=b.args[0];if(!d.isStringLiteral(i)||b.args.length>1)throw new Error("Extends tag on line "+b.line+" accepts exactly one string literal as an argument.");if(c>0)throw new Error('Extends tag must be the first tag in the template, but "extends" found on line '+b.line+".");b.template=this.compileFile(i.replace(/['"]/g,"")),this.parent=b.template}else if(b.name==="block"){j=b.args[0];if(!d.isValidBlockName(j)||b.args.length!==1)throw new Error('Invalid block tag name "'+j+'" on line '+b.line+".");if(this.type!==TEMPLATE)throw new Error('Block "'+j+'" found nested in another block tag on line'+b.line+".");try{this.hasOwnProperty("parent")&&this.parent.blocks.hasOwnProperty(j)?this.blocks[j]=g.call(b,a+"  ",this.parent.blocks[j]):this.hasOwnProperty("blocks")&&(this.blocks[j]=g.call(b,a+"  "))}catch(e){throw new Error("Circular extends found on line "+b.line+' of "'+this.id+'"!')}}f.push(b)},this),f.length&&f[0].name==="extends"&&(this.blocks=_.extend({},this.parent.blocks,this.blocks),this.tokens=this.parent.tokens)),_.each(this.tokens,function(f,g){if(typeof f=="string")return e+='__output += "'+c(f).replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/"/g,'\\"')+'";\n',e;if(typeof f!="object")return;if(f.type===VAR_TOKEN){var h=f.name.replace(/\W/g,"_"),i=f.args&&f.args.length?f.args:"";e+='if (typeof __context !== "undefined" && typeof __context.'+h+' === "function") {\n',e+="    __output += "+d.wrapMethod("",{name:h,args:i},"__context")+";\n",e+="} else {\n",e+=d.setVar("__"+h,f),e+="    __output += __"+h+";\n",e+="}\n"}if(f.type!==LOGIC_TOKEN)return;if(f.name==="block"){if(this.type!==TEMPLATE)throw new Error('Block "'+f.args[0]+'" found nested in another block tag on line '+f.line+".");this.hasOwnProperty("blocks")&&(e+=this.blocks[f.args[0]])}else f.name==="parent"?e+=a+"  "+b:e+=f.compile(a+"  ")},this),e}}(e),function(a){function b(a){var b=["==","<",">","!=","<=",">=","===","!==","&&","||","in","and","or"],c="Bad if-syntax in `{% if "+a.join(" ")+" %}...",f=[],g,h,i=0;_.each(a,function(a,j){var k=!1,l;/^\(/.test(a)&&(i+=1,a=a.substr(1),f.push({type:"separator",value:"("}));if(/^\![^=]/.test(a)||a==="not")a==="not"?a="":a=a.substr(1),f.push({type:"operator",value:"!"});if(/\)$/.test(a)){if(!i)throw new Error(c);a=a.replace(/\)$/,""),k=!0,i-=1}if(a==="in")h=f.pop(),g="inindex";else if(_.indexOf(b,a)!==-1){if(g==="operator")throw new Error(c);a=a.replace("and","&&").replace("or","||"),f.push({value:a}),g="operator"}else if(a!==""){if(g==="value")throw new Error(c);l=e.parseVariable(a),g==="inindex"?(f.push({preout:h.preout+d.setVar("__op"+j,l),value:"(((_.isArray(__op"+j+") || typeof __op"+j+' === "string") && _.indexOf(__op'+j+", "+h.value+") !== -1) || (typeof __op"+j+' === "object" && '+h.value+" in __op"+j+"))"}),h=null):f.push({preout:d.setVar("__op"+j,l),value:"__op"+j}),g="value"}k&&f.push({type:"separator",value:")"})});if(i>0)throw new Error(c);return f}a["extends"]={},a.block={ends:!0},a.parent={},a.raw={ends:!0},a.include=function(a){var b=this.args,c=b.shift(),f="__context";a=a||"";if(!d.isLiteral(c)&&!d.isValidName(c))throw new Error("Invalid arguments passed to 'include' tag.");if(b.length){_.last(b)==="only"&&(f="{}",b.pop());if(b.length&&b[0]!=="with")throw new Error("Invalid arguments passed to 'include' tag.");if(b[0]==="with"){b.shift();if(!b.length)throw new Error("Context for 'include' tag not provided, but expected after 'with' token.");f="_.extend("+f+", { ",_.each(b,function(a,b){f+='"'+a+'": __context["'+a+'"] || '+a+","}),f+=" })"}}return["(function () {",d.setVar("__template",e.parseVariable(c)),"    var includeContext = "+f+";",'    if (typeof __template === "string") {',"        __output += __this.compileFile(__template).render(includeContext, __parents);"
,"    }","})();"].join("\n"+a)},a["if"]=function(a){var c=b(this.args),d="(function () {\n";return _.each(c,function(a){a.hasOwnProperty("preout")&&a.preout&&(d+=a.preout+"\n")}),d+="\nif (\n",_.each(c,function(a){d+=a.value+" "}),d+=") {\n",d+=e.compile.call(this,a+"    "),d+="\n}\n",d+="})();\n",d},a["if"].ends=!0,a["else"]=function(a){if(_.last(this.parent).name!=="if")throw new Error('Cannot call else tag outside of "if" context.');var c=this.args.shift(),d=b(this.args),e="";return c?(e+="} else if (\n",e+="    (function () {\n",_.each(d,function(a){a.hasOwnProperty("preout")&&a.preout&&(e+=a.preout+"\n")}),e+="return (\n",_.each(d,function(a){e+=a.value+" "}),e+=");\n",e+="    })()\n",e+=") {\n",e):a+"\n} else {\n"},a["for"]=function(a){var b=this.args[0],c=this.args[1],f=e.parseVariable(this.args[2]),g="",h;a=a||"";if(typeof c!="undefined"&&c!=="in")throw new Error('Invalid syntax in "for" tag');if(!d.isValidShortName(b))throw new Error("Invalid arguments ("+b+') passed to "for" tag');if(!d.isValidName(f.name))throw new Error("Invalid arguments ("+f.name+') passed to "for" tag');return b=d.escapeVarName(b),h='forloop.index = __forloopIndex;\nforloop.first = (__forloopIndex === 0);\nforloop.last = (__forloopIndex === __forloopLength - 1);\n__context["'+b+'"] = __forloopIter[forloop.key];\n'+e.compile.call(this,a+"     "),g='(function () {\n    var forloop = {}, __forloopKey, __forloopIndex = 0, __forloopLength = 0,__origOperand1Value = __context["'+b+'"];\n'+d.setVar("__forloopIter",f)+"    else {\n"+"        return;\n"+"    }\n"+"    if (_.isArray(__forloopIter)) {\n"+"        __forloopIndex = 0; __forloopLength = __forloopIter.length;\n"+"        for (; __forloopIndex < __forloopLength; __forloopIndex += 1) {\n"+"           forloop.key = __forloopIndex;\n"+h+"        }\n"+'    } else if (typeof __forloopIter === "object") {\n'+"        __keys = _.keys(__forloopIter);\n"+"        __forloopLength = __keys.length;\n"+"        __forloopIndex = 0;\n"+"        for (; __forloopIndex < __forloopLength; __forloopIndex += 1) {\n"+"           forloop.key = __keys[__forloopIndex];\n"+h+"        }\n"+"    }\n"+'    __context["'+b+'"] = __origOperand1Value;\n'+"})();\n",g},a["for"].ends=!0,a.empty=function(a){if(_.last(this.parent).name!=="for")throw new Error('Cannot call "empty" tag outside of "for" context.');return"} if (_.keys(__forloopIter).length === 0) {\n"},a.autoescape=function(a){return e.compile.call(this,a)},a.autoescape.ends=!0,a.set=function(a){var b=this.args.shift(),c;if(this.args.shift()!=="=")throw new Error('Invalid token "'+this.args[1]+'" in {% set '+this.args[0]+' %}. Missing "=".');return c=this.args[0],/^\'|^\"|^\{|^\[/.test(c)?"var "+b+" = "+c+";":(c=e.parseVariable(c),"var "+b+" = "+"(function () {\n"+'    var __output = "";\n'+e.compile.call({tokens:[c]},a)+"\n"+" return __output; })();\n")},a["import"]=function(a){this.args.length===3;var b=this.args[0],c=this.args[1],f=this.args[2],g="";if(!d.isLiteral(b)&&!d.isValidName(b))throw new Error('Invalid attempt to import "'+b+'".');if(c!=="as")throw new Error('Invalid syntax {% import "'+b+'" '+c+" "+f+" %}");return g+="_.extend(__context, (function () {\n",g+='var __context = {}, __ctx = {}, __output = "";\n'+d.setVar("__template",e.parseVariable(b))+"__this.compileFile(__template).render(__ctx, __parents);\n"+"_.each(__ctx, function (item, key) {\n"+'    if (typeof item === "function") {\n'+'        __context["'+f+'_" + key] = item;\n'+"    }\n"+"});\n"+"return __context;\n",g+="})());\n",g},a.macro=function(a){var b=this.args.shift(),c="",d="";return this.args.length&&(c=JSON.stringify(this.args).replace(/^\[|\'|\"|\]$/g,"")),d+="__context."+b+" = function ("+c+") {\n",d+='    var __output = "";\n',d+=e.compile.call(this,a+"    "),d+="    return __output;\n",d+="};\n",d},a.macro.ends=!0,a.filter=function(a){var b=this.args.shift(),c=this.args.length?this.args.join(", "):"",f="(function () {\n";return f+='    var __output = "";\n',f+=e.compile.call(this,a+"    ")+"\n",f+="    return __output;\n",f+="})()\n","__output += "+d.wrapFilter(f.replace(/\n/g,""),{name:b,args:c})+";\n"},a.filter.ends=!0}(f),a}();